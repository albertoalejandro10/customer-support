<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="../assets/images/logo-full-title.png" type="image/x-icon">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

    <link rel="stylesheet" href="../scss/main.scss">
    <link rel="stylesheet" href="../scss/service.scss">

    <link rel="stylesheet" href="../node_modules/bootstrap-select/sass/bootstrap-select.scss">

    <title>Servicios del cliente</title>
  </head>
  <body class="bg-dark">
    <div class="wrapper">
      <div class="container-fluid">
        <div class="container mt-2 p-4 rounded bg-light shadow">

          <form id="form">

            <!-- Form - Top -->
            <div class="row p-2 mb-2 rounded form-top">
              <div class="col d-flex align-items-center">
                <h1 class="h6 mb-0 font-weight-bolder"><i class="fas fa-headset"></i>Servicio</h1>
              </div>
              <div class="col-8 text-right">
                <button id="addService" type="submit" class="btn btn-primary text-white"><i class="fas fa-cloud-upload-alt"></i> Grabar</button>

                <button type="button" class="btn btn-success text-white"><i class="fas fa-list-alt"></i> <a id="redirectToIndex">Lista</a></button>
                
                <button id="deleteService" type="button" class="btn btn-danger text-white"><i class="fas fa-trash-alt"></i> Eliminar</button>
              </div>
            </div>          

            <!-- Form - Middle higher -->
            <div class="row p-2 mt-2 rounded align-items-center form-middle">

              <div class="col-2">
                <label for="">Cliente:</label>
              </div>
    
              <div class="col-10">
                <p id="customer" class="mb-0"></p>
              </div>
    
              <div class="col-2">
                <label for="observation">Observación:</label>
              </div>
    
              <div class="col-10">
                <input type="text" name="observation" id="observation" class="form-control">
              </div>
            </div>

            <!-- Form - Middle lower -->
            <div class="row p-2 mt-2 rounded align-items-center form-middle">
              <!-- Producto -->
              <div class="col-2 mt-2">
                <label for="product">Producto:</label>
              </div>

              <div class="col-10 mt-2 right-inner-addon input-container">
                <i class="fas fa-search"></i>
                <select id="product" class="selectpicker" title="Seleccionar producto" data-live-search="true" data-width="100%">
                  <!-- Options -->
                </select>
              </div>

              <!-- Descripción -->
              <div class="col-2 mt-2">
                <label for="description">Descripción:</label>
              </div>

              <div class="col-10 mt-2">
                <input type="text" name="description" id="description" class="form-control">
              </div>

              <!-- Cantidad de productos -->
              <div class="col-2 mt-2">
                <label for="quantity">Cantidad:</label>
              </div>

              <div class="col-10 mt-2">
                <input type="number" name="quantity" id="quantity" class="form-control w-35" value="1">
              </div>

              <!-- Tipo de pago -->
              <div class="col-2 mt-2">
                <label for="type">Tipo:</label>
              </div>

              <div class="col-10 mt-2">
                <select name="type" id="type" class="form-control w-35">
                  <option value="1">Precio lista</option>
                  <option value="2">Precio fijo</option>
                  <option value="3">% Descuento</option>
                </select>
              </div>

              <!-- Precio Neto -->
              <div class="col-2 mt-2 priceNet d-none">
                <label for="netPrice">Precio neto:</label>
              </div>

              <div class="col-10 mt-2 priceNet d-none">
                <input type="number" name="netPrice" id="netPrice" class="form-control w-35" placeholder="0.00" step=".01">
              </div>

              <!-- % Descuento -->
              <div id="rateDiscount" class="col-2 mt-2 rateDiscount d-none">
                <label for="discountRate">% Descuento</label>
              </div>

              <div class="col-10 mt-2 rateDiscount d-none">
                <input type="number" name="discountRate" id="discountRate" class="form-control w-35" placeholder="%" min="0" max="100">
              </div>

              <!-- Fecha de vencimiento -->
              <div class="col-2 mt-2">
                <label for="expiration">Vencimiento:</label>
              </div>

              <div class="col-10 mt-2">
                <input type="date" name="expiration" id="expiration" class="form-control w-35">
              </div>

              <!-- Tipo de abono -->
              <div class="col-2 mt-2">
                <label for="abonoChoice">Abono:</label>
              </div>
              <div class="col-10 mt-2">
                <input type="checkbox" name="abono" id="abonoChoice">
              </div>
              <div class="col-2 mt-2">
                <label for="activoChoice">Activo:</label>
              </div>
              <div class="col-10 mt-2">
                <input type="checkbox" name="activo" id="activoChoice">
              </div>
            </div>

          </form>

          <!-- Footer form -->
          <div class="row p-2 mt-2 rounded form-bottom">
            <div class="col-12">
              <div class="row align-items-center">
                <div class="col-sm">
                  &nbsp;
                </div>
                <div class="col-sm">
                  <h6 class="font-weight-bolder text-center mt-2">Ejercicio 2021-2022</h6>
                </div>
                <div class="col-sm text-right">
                  <p class="mb-0">Carlos H. Chaves</p>
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="row align-items-end">
                <div class="col-6 text-left">
                  <p class="mb-0">Softsystems SRL - 07/02/2022 09:19:27 a.m</p>
                </div>
                <div class="col-6 text-right">
                  <p class="mb-0">01/04/2021 - 31/03/2022</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script src="./js/service.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/bootstrap-select.min.js"></script>

  <script>
  $.fn.selectpicker.Constructor.BootstrapVersion = '4';

  // Fetch para traer datos de productos (detalle y id)
  fetch(`https://62048c21c6d8b20017dc3571.mockapi.io/api/v1/productos`)
    .then( resp => resp.json() )
    .then( resp => {
        const products = resp
        for ( let element of products ) {
            // Desestructuracion del objeto element
            const { detalle, id } = element
            // console.log(detalle, Number(id))

            let select = document.querySelector('.selectpicker')
            let option = document.createElement("option")
            option.setAttribute("data-tokens", detalle)
            option.setAttribute("data-content", detalle)
            option.value = id
            option.textContent = detalle

            select.appendChild( option )

            $('.selectpicker').selectpicker('refresh')

        }
    })
  </script>
</html>
